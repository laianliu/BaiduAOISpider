
from spatial.coords import bd09mc_to_wgs84
from spatial.geometry import points_to_polygon


#入口函数

if __name__ == "__main__":
  geo = "4|12672231.829085,2571270.052621;12672443.497695,2571448.118570|1-12672234.5702266,2571361.7479044,12672233.6038031,2571361.1041572,12672232.8042857,2571360.2340524,12672232.2272073,2571359.1860208,12672231.8947474,2571358.0201966,12672231.8290849,2571356.7967151,12672232.0412644,2571355.5995965,12672232.5089961,2571354.5005871,12672279.6686422,2571272.9433301,12672280.4363555,2571271.9311262,12672281.3928465,2571271.1004617,12672282.4713916,2571270.4986982,12672283.6386288,2571270.1495174,12672284.8612168,2571270.0526212,12672286.0724535,2571270.2313885,12672287.2279051,2571270.6614391,12672309.3789666,2571281.4019726,12672440.3129599,2571348.5326270,12672441.3346545,2571349.1665375,12672442.2006019,2571350.0266582,12672442.8663987,2571351.0645729,12672443.3098538,2571352.2440829,12672443.4976950,2571353.4929081,12672443.4188619,2571354.7509867,12672443.0845155,2571355.9584869,12672405.8873298,2571445.0956090,12672405.2642233,2571446.1324865,12672404.4412642,2571446.9755445,12672403.4629082,2571447.6132398,12672402.3736404,2571447.9980600,12672401.2290286,2571448.1185704,12672400.0957527,2571447.9634446,12672399.0071381,2571447.5450023,12672368.6397814,2571431.6851327,12672284.1274664,2571388.9804991,12672234.5702266,2571361.7479044;"
  xys = geo.split("|")[2][2:-1].split(",")
  points = [bd09mc_to_wgs84(float(x), float(y)) for x, y in zip(xys[::2], xys[1::2])]
  str = points_to_polygon(points)
  print(str)

